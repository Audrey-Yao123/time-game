# 时间管理小游戏 · 卡片问答 玩法说明

本项目是一个轻量的时间管理主题小游戏，通过“卡片问答”的方式，让玩家快速参与并在汇总视图中看到整场的统计结果（文本答案与选择题分布）。页面包含首页、游戏主界面、单卡片作答界面和汇总视图四个部分，支持本地存储与 CSV 导出。

**快速开始**

- 在项目根目录运行本地服务：`python3 -m http.server 8000 --bind 127.0.0.1`，打开 `http://127.0.0.1:8000/`。
- 主要文件：`index.html`（页面结构）、`style.css`（样式）、`script.js`（逻辑与数据）。

**游戏流程**

- 进入首页后，输入或确认“当前玩家”并开始游戏。
- 在“游戏主界面”查看卡片列表，按需选择卡片进入作答界面。
- 在“卡片作答”页按题型作答：
  - 选择题（`mcq`）：选择一个或多个选项（按题目设定）。
  - 填空题（`text`）：填写文本答案。
- 提交答案后返回主界面，继续选择下一张卡片。
- 进入“汇总”页查看所有玩家的作答统计与分布；可导出 CSV。

**视图说明**

- 首页（`#home`）：主题介绍与开始入口，显示预计时长与卡片总数。
- 游戏（`#game`）：展示卡片列表与当前玩家信息，可快速跳转到任意卡片。
- 卡片（`#card`）：单题作答界面，显示题目标题与描述，支持返回与提交。
- 汇总（`#summary`）：
  - 顶部汇总表：按玩家行展示“玩家 / 已答卡数 / 完成率 / 每张卡片的答案预览”。
  - 按卡片顺序：每张卡片依次展示结果；选择题为饼图，填空题为文本表格。

**卡片与排序**

- 卡片列表与汇总的“按卡片顺序”均基于 `state.cards` 的顺序渲染。
- 若需自定义顺序，可在 `script.js` 中调整 `state.cards` 的顺序或实现拖拽排序。

**汇总视图细节**

- 表格统一左对齐，支持在小屏下横向滚动，避免超出视口。
- 列宽规则：
  - “玩家 / 已答卡数 / 完成率”列固定为 `10ch`。
  - 文本题表格中的“答案”列默认为 `22ch`，其余列同样遵循固定宽度策略。
- 选择题饼图包含图例与计数，未作答项以灰色显示。

**数据存储与导出**

- 作答数据保存于浏览器本地存储（`localStorage`），键名：`surveyGame.v1`。
- 可在汇总页点击“导出 CSV”按钮，将当前数据导出为文本文件下载。

**项目结构**

- `index.html`：页面结构与各视图入口（首页/游戏/卡片/汇总）。
- `style.css`：全站样式，包括表格、图表、卡片容器与响应式滚动。
- `script.js`：核心逻辑，包含状态管理、视图渲染、作答提交与导出。
- `autosave.js`（可选）：与自动保存相关的辅助逻辑（如有启用）。

**自定义与配置**

- 在 `script.js` 的 `QUESTIONS` 中可调整题目、类型与选项。
- 通过修改样式变量或类名可进一步定制表格宽度、卡片外观与配色。

**常见问题**

- 未显示数据：请确认已有至少一位玩家作答，或清除浏览器缓存后重试。
- 宽度与滚动：表格外层容器启用 `overflow-x: auto`，小屏时可以横向滚动查看完整内容。

**浏览器兼容**

- 现代桌面浏览器均可正常使用；移动端在窄屏下通过横向滚动查看表格与图表。

如需定制题库、排序交互或导出格式，请在 `script.js` 中对应位置扩展逻辑，我可以协助你完成具体改造。

## 版本发布

- 版本号：`V2release`
- 发布日期：2025-11-07
- 主要更新：
  - 汇总视图统一为“按卡片顺序”渲染，取消分离的图表与文本容器（使用单一 `summary-items`）。
  - 所有表格默认左对齐，文本题表格增加横向滚动容器，避免页面整体溢出（`.table-scroll`）。
  - 顶部汇总表采用卡片样式背景、边框与圆角，提升可读性（`summary-table-wrap`）。
  - 统一表格的字体大小与内边距（`font-size: 14px; padding: 10px;`）。
  - 列宽规范：
    - “玩家 / 已答卡数 / 完成率”列固定为 `10ch`（类名 `col-5ch`）。
    - 文本题表格中“答案”列默认宽度为 `22ch`，其余列继承默认策略。
  - 图例色块与饼图渲染优化，保持固定尺寸与一致视觉风格。
  - 标题更新为“按卡片顺序”，与卡片列表顺序一致。

### V3release（2025-11-07）
- 兼容性与稳定性
  - 饼图背景自动检测 `conic-gradient` 支持；不支持环境（如部分微信/旧内核）用 SVG 环形分段渲染，颜色与比例与原样一致，`.pie` 的尺寸与样式保持不变。
  - 在 Safari、Chrome、微信内置浏览器下均保持一致显示，不修改任何页面布局与样式。
- 显示优化
  - 昵称提示遮罩更柔和：`rgba(0,0,0,0.18)` + `blur(1px)`（含 `-webkit-backdrop-filter`），保留 3 秒自动隐藏、`pointer-events: none` 不阻挡交互。
- 汇总与表格
  - 统一“玩家”列宽为 10ch（`col-5ch`），在汇总表与文本表中保持一致，提升对齐稳定性。